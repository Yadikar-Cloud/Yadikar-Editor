tinymce.PluginManager.add("exportpdf",(function(t,n){const e={UKIJEkranRegular:"/editor/assets/fonts/UKIJEkran.ttf",UKIJChiwerKesmeRegular:"/editor/assets/fonts/UKIJKesme.ttf",UKIJCJKRegular:"/editor/assets/fonts/UKIJCJK.ttf",UKIJKufiRegular:"/editor/assets/fonts/UKIJKu.ttf"};async function o(t){const n=await fetch(t),e=await n.arrayBuffer();let o="";const a=new Uint8Array(e),r=a.byteLength;for(let t=0;t<r;t++)o+=String.fromCharCode(a[t]);return btoa(o)}async function a(t){if(!window.queryLocalFonts)return null;const n=(await window.queryLocalFonts()).find((n=>n.fullName===t));if(!n)return null;const e=await n.blob();return await new Promise((t=>{const n=new FileReader;n.onloadend=()=>t(n.result.split(",")[1]),n.readAsDataURL(e)}))}async function r(){const{jsPDF:n}=window.jspdf;var r=new n,i=t.getBody();const s=function(t){const n=new Set;return t.querySelectorAll("*").forEach((t=>{const e=window.getComputedStyle(t).fontFamily.split(",")[0].replace(/['"]/g,"").trim();e&&n.add(e)})),[...n]}(i);await async function(t,n){for(const r of n){const n=e[r];if(n){const e=await o(n);t.addFileToVFS(r+".ttf",e),t.addFont(r+".ttf",r,"normal")}else{const n=await a(r);n?(t.addFileToVFS(r+".ttf",n),t.addFont(r+".ttf",r,"normal")):console.warn(`Font ${r} not found on system`)}}}(r,s),r.html(i,{callback:function(t){t.output("dataurlnewwindow")},x:15,y:15,width:180,windowWidth:512,html2canvas:{ignoreElements:function(t){return"ignorePDF"===t.id},onclone:function(t){const n=t.createElement("style");n.innerHTML="\n\t\t\t\t        ul { list-style: none !important; padding-right: 1.2em; }\n\t\t\t\t    ",t.head.appendChild(n),t.querySelectorAll("li").forEach((t=>{t.dataset.bulletAdded||(t.innerHTML="â€¢ "+t.innerHTML,t.dataset.bulletAdded="true")}))}}})}return t.ui.registry.addButton("exportpdf",{text:"Export as PDF",icon:"image",tooltip:"Export as PDF",onAction:async function(){r()}}),t.ui.registry.addMenuItem("exportpdf",{text:"Export as PDF",icon:"image",onAction:async function(){r()}}),{getMetadata:function(){return{name:"Export as PDF",url:"http://yoursite.com"}}}}));