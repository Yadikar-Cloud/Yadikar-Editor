!function(){"use strict";tinymce.PluginManager.add("givefeedback",function(e,t){if(e.ui.registry.addButton("givefeedback",{text:"Give Feedback",icon:"comment",tooltip:"Send Feedback",onAction:function(){i()}}),e.ui.registry.addMenuItem("givefeedback",{text:"Give Feedback",icon:"comment",onAction:function(){i()}}),!document.getElementById("givefeedback-style")){var n=document.createElement("style");n.id="givefeedback-style",n.innerHTML="\n        .tox-dialog__body-content .tox-form__group:last-child textarea {\n          min-height: 150px !important;\n          height: 150px !important;\n        }\n      ",document.head.appendChild(n)}function i(){e.windowManager.open({title:"Give Feedback",size:"normal",body:{type:"panel",items:[{type:"input",name:"title",label:"Title",placeholder:"Enter feedback title"},{type:"textarea",name:"message",label:"Message",placeholder:"Enter your feedback message",height:"300px"}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",text:"Send",primary:!0}],onSubmit:function(t){var n=t.getData();if(n.title&&n.message){var i=e.notificationManager.open({text:"Sending feedback...",type:"info",timeout:0}),a=new XMLHttpRequest;a.open("POST","/feedback/send",!0),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){if(i.close(),200===a.status)try{var n=JSON.parse(a.responseText);n.success?(e.notificationManager.open({text:"Feedback sent successfully!",type:"success",timeout:3e3}),t.close()):e.notificationManager.open({text:"Error: "+(n.message||"Failed to send feedback"),type:"error",timeout:5e3})}catch(t){e.notificationManager.open({text:"Error parsing response",type:"error",timeout:3e3})}else e.notificationManager.open({text:"Server error: "+a.status,type:"error",timeout:3e3})},a.onerror=function(){i.close(),e.notificationManager.open({text:"Network error. Please try again.",type:"error",timeout:3e3})},a.send(JSON.stringify({title:n.title,message:n.message,editor_content:e.getContent()}))}else e.notificationManager.open({text:"Please fill in all fields",type:"error",timeout:3e3})}})}return{getMetadata:function(){return{name:"Give Feedback Plugin",url:"https://example.com"}}}})}();