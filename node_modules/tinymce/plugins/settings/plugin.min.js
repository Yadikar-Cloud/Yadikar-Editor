tinymce.PluginManager.add("settings",function(e,t){const n="tinymce_settings";let a=[];const i={language:"en_US",skin:"oxide",fontSize:"14px",contentFontSize:"16px",contentFontType:"Georgia",autosave:!0,autosaveInterval:30,spellcheck:!0};function o(){try{const e=localStorage.getItem(n);return e?{...i,...JSON.parse(e)}:i}catch(e){return console.error("Error loading settings:",e),i}}function s(t){!function(e){try{return localStorage.setItem(n,JSON.stringify(e)),!0}catch(e){return console.error("Error saving settings:",e),!1}}(t)?e.notificationManager.open({text:"Failed to save settings",type:"error",timeout:3e3}):(e.notificationManager.open({text:"Settings saved! Reloading editor...",type:"info",timeout:2e3}),setTimeout(()=>{const n=e.getContent();e.settings.selector;tinymce.remove(),window.initializeTinyMCE(t,n)},500))}function l(){const t=o(),n=[{text:"Small (12px)",value:"12px"},{text:"Medium (14px)",value:"14px"},{text:"Large (16px)",value:"16px"},{text:"Extra Large (18px)",value:"18px"}],i={title:"Editor Settings",size:"normal",body:{type:"tabpanel",tabs:[{name:"general",title:"General",items:[{type:"selectbox",name:"language",label:"Language",items:a.map(e=>({text:e.name,value:e.code}))},{type:"selectbox",name:"skin",label:"Theme",items:[{text:"Light (Oxide)",value:"oxide"},{text:"Dark (Oxide)",value:"oxide-dark"},{text:"Polaris (Classic)",value:"polaris"}]},{type:"selectbox",name:"fontSize",label:"UI Font Size",items:n},{type:"selectbox",name:"contentFontSize",label:"Default Font Size",items:n},{type:"selectbox",name:"contentFontType",label:"Default Font Type",items:[{text:"Arial",value:"arial"},{text:"Courier New",value:"courier new"},{text:"Georgia",value:"georgia"},{text:"UKIJ Ekran",value:"UKIJEkranRegular"},{text:"UKIJ Chiwer Kesme",value:"UKIJChiwerKesmeRegular"},{text:"UKIJ Kufi",value:"UKIJKufiRegular"}]}]},{name:"page",title:"Page",items:[{type:"input",name:"topBottomPadding",label:"Top/bottom padding",inputMode:"numeric"},{type:"input",name:"leftRightPadding",label:"Left/right padding",inputMode:"numeric"},{type:"selectbox",name:"pageNumberPosition",label:"Page number position",items:[{text:"Left",value:"40px"},{text:"Center",value:"50%"},{text:"Right",value:"726px"}]}]}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",text:"Apply",primary:!0}],initialData:t,onSubmit:function(t){const n=t.getData();n.autosave&&(!n.autosaveInterval||n.autosaveInterval<10)?e.notificationManager.open({text:"Auto-save interval must be at least 10 seconds",type:"warning",timeout:3e3}):(t.close(),s(n))}};e.windowManager.open(i)}return e.ui.registry.addButton("settings",{text:"Settings",icon:"settings",tooltip:"Editor Settings",onAction:function(){l()}}),e.ui.registry.addMenuItem("settings",{text:"Settings",icon:"settings",onAction:function(){l()}}),e.on("init",function(){!async function(){try{const e=await fetch(t+"/languages.json");a=await e.json()}catch(e){console.error("Failed to load languages:",e),a=[{code:"en_US",name:"English (US)"},{code:"it",name:"Italian"},{code:"es",name:"Spanish"},{code:"fr_FR",name:"French"},{code:"de",name:"German"}]}}()}),window.getTinyMCESettings=o,{getMetadata:function(){return{name:"Settings",url:"http://yoursite.com"}}}});