tinymce.PluginManager.add("settings",(function(e,t){let a={};const n="tinymce_settings";var i=tinymce.util.Tools.resolve("tinymce.util.Tools");const o={version:2,language:"en_US",skin:"oxide",fontSize:"14px",contentFontSize:"16px",contentFontType:"Georgia",topBottomPadding:"40",leftRightPadding:"40",pageNumberPosition:"50%",pageBackgroundColor:"#FFFFFF",theme:"silver",sttlanguage:"en-US",ocrlanguage:"eng",loadSystemFonts:!1,systemFonts:""};function s(){try{const e=localStorage.getItem(n);return e?{...o,...JSON.parse(e)}:o}catch(e){return console.error("Error loading settings:",e),o}}function l(t){!function(e){try{return localStorage.setItem(n,JSON.stringify(e)),!0}catch(e){return console.error("Error saving settings:",e),!1}}(t)?e.notificationManager.open({text:"Failed to save settings",type:"error",timeout:3e3}):(e.notificationManager.open({text:"Settings saved! Reloading editor...",type:"info",timeout:2e3}),setTimeout((()=>{const a=e.getContent();e.settings.selector;tinymce.remove(),window.initializeTinyMCE(t,a)}),500))}var r=function(t){var a=u(e,t),n=[];return i.each(a,(function(e){n.push({text:e.name,value:e.value})})),n},u=function(e,t){return i.map(function(e,t){return e.getParam(t,"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")}(e,t).split(","),(function(e){var t=e.split("=");return{name:t[0],value:t[1]}}))};function c(){const t=s(),n=r("site_languages"),i=r("webspeechapi_languages"),o=r("ocr_languages"),u=[{text:"12px",value:"12px"},{text:"14px",value:"14px"},{text:"16px",value:"16px"},{text:"18px",value:"18px"}],c={title:"Editor Settings",size:"normal",body:{type:"tabpanel",tabs:[{name:"general",title:"General",items:[{type:"selectbox",name:"language",label:"Language",items:n},{type:"selectbox",name:"skin",label:"Theme",items:[{text:"Light (Oxide)",value:"oxide"},{text:"Dark (Oxide)",value:"oxide-dark"},{text:"Polaris (Classic)",value:"polaris"}]},{type:"selectbox",name:"fontSize",label:"UI Font Size",items:u},{type:"selectbox",name:"contentFontSize",label:"Default Font Size",items:u},{type:"selectbox",name:"contentFontType",label:"Default Font Type",items:[{text:"Andale Mono",value:"andale mono,times"},{text:"Arial",value:"arial,helvetica,sans-serif"},{text:"Arial Black",value:"arial black,avant garde"},{text:"Book Antiqua",value:"book antiqua,palatino"},{text:"Comic Sans MS",value:"comic sans ms,sans-serif"},{text:"Courier New",value:"courier new,courier"},{text:"Georgia",value:"georgia,palatino"},{text:"Helvetica",value:"helvetica"},{text:"Impact",value:"impact,chicago"},{text:"Microsoft Uighur",value:"Microsoft Uighur"},{text:"UKIJ Ekran",value:"UKIJEkranRegular"},{text:"UKIJ Chiwer Kesme",value:"UKIJChiwerKesmeRegular"},{text:"UKIJ CJK",value:"UKIJCJKRegular"},{text:"UKIJ Kufi",value:"UKIJKufiRegular"},{text:"Symbol",value:"symbol"},{text:"Tahoma",value:"tahoma,arial,helvetica,sans-serif"},{text:"Terminal",value:"terminal,monaco"},{text:"Times New Roman",value:"times new roman,times"},{text:"Trebuchet MS",value:"trebuchet ms,geneva"},{text:"Verdana",value:"verdana,geneva"},{text:"Webdings",value:"webdings"},{text:"Wingdings",value:"wingdings,zapf dingbats"}]}]},{name:"page",title:"Page",items:[{type:"input",name:"topBottomPadding",label:"Top/bottom padding",inputMode:"numeric",disabled:!1===tinymce.Env.desktop},{type:"input",name:"leftRightPadding",label:"Left/right padding",inputMode:"numeric",disabled:!1===tinymce.Env.desktop},{type:"selectbox",name:"pageNumberPosition",label:"Page number position",items:[{text:"Left",value:"40px"},{text:"Center",value:"50%"},{text:"Right",value:"726px"}],disabled:!1===tinymce.Env.desktop},{type:"selectbox",name:"pageBackgroundColor",label:"Background color",items:[{text:"White (default)",value:"#FFFFFF",style:"background-color: #FFFFFF;"},{text:"Warm white",value:"#FEFCF3",style:"background-color: #FEFCF3;"},{text:"Light Blue",value:"#EFF7FA",style:"background-color: #EFF7FA;"},{text:"Light Tan",value:"#FAF4E8",style:"background-color: #FAF4E8;"},{text:"Cream",value:"#FFFFF0",style:"background-color: #FFFFF0;"}],disabled:!1===tinymce.Env.desktop}]},{name:"tools",title:"Tools",items:[{type:"selectbox",name:"sttlanguage",label:"Default Speech Recognition Language",items:i},{type:"selectbox",name:"ocrlanguage",label:"Default OCR Language",items:o},{type:"checkbox",name:"loadSystemFonts",label:"Load system fonts"}]}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",text:"Apply",primary:!0}],initialData:t,onChange:async function(e){e.getData().loadSystemFonts&&(a.systemFonts=await g())},onSubmit:function(t){const n=t.getData(),i=n.pageNumberPosition.replace(/[^0-9]/g,"");i<=383&&"50%"!==n.pageNumberPosition?n.pageNumberPosition=n.leftRightPadding+"px":i>=383&&"50%"!==n.pageNumberPosition&&(n.pageNumberPosition=766-n.leftRightPadding+"px"),n.autosave&&(!n.autosaveInterval||n.autosaveInterval<10)?e.notificationManager.open({text:"Auto-save interval must be at least 10 seconds",type:"warning",timeout:3e3}):(t.close(),l({...n,...a}))}};e.windowManager.open(c)}async function g(e){if(window.queryLocalFonts)try{const e=await window.queryLocalFonts();let t="";for(const a of e)t+=a.fullName+"="+a.family+";";return t}catch(e){console.error(e.name,e.message)}else e.notificationManager.open({text:"Local Font Access API not supported in this browser",type:"error",timeout:5e3})}return e.ui.registry.addButton("addSystemFonts",{tooltip:"Load system fonts",icon:"sharpen",onAction:async function(){const e=s();a.systemFonts=await g(),l({...e,...a}),tinymce.remove(),initializeTinyMCE()}}),e.ui.registry.addButton("settings",{text:"Settings",icon:"settings",tooltip:"Editor Settings",onAction:function(){c()}}),e.ui.registry.addMenuItem("settings",{text:"Settings",icon:"settings",onAction:function(){c()}}),window.getTinyMCESettings=s,{getMetadata:function(){return{name:"Settings",url:"http://yoursite.com"}}}}));