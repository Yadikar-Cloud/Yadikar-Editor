tinymce.PluginManager.add("settings",function(e,t){const a="tinymce_settings";let n=[];const i={version:2,language:"en_US",skin:"oxide",fontSize:"14px",contentFontSize:"16px",contentFontType:"Georgia",topBottomPadding:"40",leftRightPadding:"40",pageNumberPosition:"50%",pageBackgroundColor:"#FFFFFF",theme:"silver"};function o(){try{const e=localStorage.getItem(a);return e?{...i,...JSON.parse(e)}:i}catch(e){return console.error("Error loading settings:",e),i}}function l(t){!function(e){try{return localStorage.setItem(a,JSON.stringify(e)),!0}catch(e){return console.error("Error saving settings:",e),!1}}(t)?e.notificationManager.open({text:"Failed to save settings",type:"error",timeout:3e3}):(e.notificationManager.open({text:"Settings saved! Reloading editor...",type:"info",timeout:2e3}),setTimeout(()=>{const a=e.getContent();e.settings.selector;tinymce.remove(),window.initializeTinyMCE(t,a)},500))}function s(){const t=o(),a=[{text:"12px",value:"12px"},{text:"14px",value:"14px"},{text:"16px",value:"16px"},{text:"18px",value:"18px"}],i={title:"Editor Settings",size:"normal",body:{type:"tabpanel",tabs:[{name:"general",title:"General",items:[{type:"selectbox",name:"language",label:"Language",items:n.map(e=>({text:e.name,value:e.code}))},{type:"selectbox",name:"skin",label:"Theme",items:[{text:"Light (Oxide)",value:"oxide"},{text:"Dark (Oxide)",value:"oxide-dark"},{text:"Polaris (Classic)",value:"polaris"}]},{type:"selectbox",name:"fontSize",label:"UI Font Size",items:a},{type:"selectbox",name:"contentFontSize",label:"Default Font Size",items:a},{type:"selectbox",name:"contentFontType",label:"Default Font Type",items:[{text:"Andale Mono",value:"andale mono,times"},{text:"Arial",value:"arial,helvetica,sans-serif"},{text:"Arial Black",value:"arial black,avant garde"},{text:"Book Antiqua",value:"book antiqua,palatino"},{text:"Comic Sans MS",value:"comic sans ms,sans-serif"},{text:"Courier New",value:"courier new,courier"},{text:"Georgia",value:"georgia,palatino"},{text:"Helvetica",value:"helvetica"},{text:"Impact",value:"impact,chicago"},{text:"Microsoft Uighur",value:"Microsoft Uighur"},{text:"UKIJ Ekran",value:"UKIJEkranRegular"},{text:"UKIJ Chiwer Kesme",value:"UKIJChiwerKesmeRegular"},{text:"UKIJ CJK",value:"UKIJCJKRegular"},{text:"UKIJ Kufi",value:"UKIJKufiRegular"},{text:"Symbol",value:"symbol"},{text:"Tahoma",value:"tahoma,arial,helvetica,sans-serif"},{text:"Terminal",value:"terminal,monaco"},{text:"Times New Roman",value:"times new roman,times"},{text:"Trebuchet MS",value:"trebuchet ms,geneva"},{text:"Verdana",value:"verdana,geneva"},{text:"Webdings",value:"webdings"},{text:"Wingdings",value:"wingdings,zapf dingbats"}]}]},{name:"page",title:"Page",items:[{type:"input",name:"topBottomPadding",label:"Top/bottom padding",inputMode:"numeric",disabled:!1===tinymce.Env.desktop},{type:"input",name:"leftRightPadding",label:"Left/right padding",inputMode:"numeric",disabled:!1===tinymce.Env.desktop},{type:"selectbox",name:"pageNumberPosition",label:"Page number position",items:[{text:"Left",value:"40px"},{text:"Center",value:"50%"},{text:"Right",value:"726px"}],disabled:!1===tinymce.Env.desktop},{type:"selectbox",name:"pageBackgroundColor",label:"Background color",items:[{text:"White (default)",value:"#FFFFFF",style:"background-color: #FFFFFF;"},{text:"Warm white",value:"#FEFCF3",style:"background-color: #FEFCF3;"},{text:"Light Blue",value:"#EFF7FA",style:"background-color: #EFF7FA;"},{text:"Light Tan",value:"#FAF4E8",style:"background-color: #FAF4E8;"},{text:"Cream",value:"#FFFFF0",style:"background-color: #FFFFF0;"}],disabled:!1===tinymce.Env.desktop}]}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",text:"Apply",primary:!0}],initialData:t,onSubmit:function(t){const a=t.getData(),n=a.pageNumberPosition.replace(/[^0-9]/g,"");n<=383&&"50%"!==a.pageNumberPosition?a.pageNumberPosition=a.leftRightPadding+"px":n>=383&&"50%"!==a.pageNumberPosition&&(a.pageNumberPosition=766-a.leftRightPadding+"px"),a.autosave&&(!a.autosaveInterval||a.autosaveInterval<10)?e.notificationManager.open({text:"Auto-save interval must be at least 10 seconds",type:"warning",timeout:3e3}):(t.close(),l(a))}};e.windowManager.open(i)}return e.ui.registry.addButton("settings",{text:"Settings",icon:"settings",tooltip:"Editor Settings",onAction:function(){s()}}),e.ui.registry.addMenuItem("settings",{text:"Settings",icon:"settings",onAction:function(){s()}}),e.on("init",function(){!async function(){try{const e=await fetch(t+"/languages.json");n=await e.json()}catch(e){console.error("Failed to load languages:",e),n=[{code:"en_US",name:"English (US)"},{code:"it",name:"Italian"},{code:"es",name:"Spanish"},{code:"fr_FR",name:"French"},{code:"de",name:"German"}]}}()}),window.getTinyMCESettings=o,{getMetadata:function(){return{name:"Settings",url:"http://yoursite.com"}}}});