!function(){"use strict";var e=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},t=(Object.hasOwnProperty,function(){return t=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)}),n=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=(tinymce.util.Tools.resolve("tinymce.util.URI"),tinymce.util.Tools.resolve("tinymce.util.XHR"),"SpeechRecognitionStart SpeechRecognitionEnd"),c=function(e,n,c){var r,u,s=(r=function(e){return i.map(function(e){return e.getParam("webspeechapi_language","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")}(e).split(","),(function(e){var t=e.split("=");return{name:t[0],value:t[1]}}))}(e),u=[],i.each(r,(function(e){u.push({selectable:!0,text:e.name,data:e.value})})),u),a=function(){n.get()?(n.set(!1),function(e){e.fire("SpeechRecognitionEnd")}(e)):(n.set(!0),function(e){e.fire("SpeechRecognitionStart")}(e))},l={tooltip:"Speech Recognition",onAction:a,icon:"microphone",onSetup:function(t){t.setActive(n.get());var i=function(){t.setActive(n.get())};return e.on(o,i),function(){e.off(o,i)}}},g=t(t({},l),{type:"splitbutton",select:function(e){return e===c.get()},fetch:function(e){e(i.map(s,(function(e){return{type:"choiceitem",value:e.data,text:e.text}})))},onItemAction:function(e,t){c.set(t)}});s.length>1?e.ui.registry.addSplitButton("speechrecognition",g):e.ui.registry.addToggleButton("speechrecognition",l),e.ui.registry.addToggleMenuItem("speechrecognition",{text:"Speech Recognition",icon:"microphone",onSetup:function(t){t.setActive(n.get());var i=function(){t.setActive(n.get())};return e.on(o,i),function(){e.off(o,i)}},onAction:a})};n.add("speechrecognition",(function(t){var n=e(!1),i=e(function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)}(t));const o=window.SpeechRecognition||window.webkitSpeechRecognition;return c(t,n,i),function(e,t,n,i){const o=new i;o.addEventListener("result",(e=>{for(let t=e.resultIndex,n=e.results.length;t<n;t++)e.results[t].isFinal,tinymce.activeEditor.insertContent(e.results[t][0].transcript)})),o.addEventListener("error",(e=>{})),o.addEventListener("end",(()=>{})),e.on("SpeechRecognitionStart",(function(){console.log("SpeechRecognition Start event detected");const e=!1;o.lang=n.get(),o.continuous=!0,o.interimResults=e;try{o.start()}catch(e){}})),e.on("SpeechRecognitionEnd",(function(){console.log("SpeechRecognition End event detected"),o.stop()}))}(t,0,i,o),function(e,t,n){return{markErrors:function(n){markErrors(e,t,n)},getLanguage:n.get}}(t,n,i)}))}();